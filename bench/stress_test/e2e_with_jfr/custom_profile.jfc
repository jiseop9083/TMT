<?xml version="1.0" encoding="UTF-8"?>
<configuration version="2.0" label="Custom Profiling">

  <!-- CPU 샘플링(실행 중 스택) -->
  <event name="jdk.ExecutionSample">
    <setting name="enabled">true</setting>
    <setting name="period">2 ms</setting>
  </event>

  <event name="jdk.NativeMethodSample">
    <setting name="enabled">true</setting>
    <setting name="period">2 ms</setting>
  </event>

  <!-- 대기/블로킹 원인(중요) -->
  <event name="jdk.ThreadSleep">
    <setting name="enabled">true</setting>
    <setting name="threshold">2 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <event name="jdk.JavaMonitorWait">
    <setting name="enabled">true</setting>
    <setting name="threshold">1 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <event name="jdk.ThreadPark">
    <setting name="enabled">true</setting>
    <setting name="threshold">1 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <!-- 락 컨텐션(선택이지만 매우 유용) -->
  <event name="jdk.JavaMonitorEnter">
    <setting name="enabled">true</setting>
    <setting name="threshold">1 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <!-- CPU/GC/리소스(원인 범주 분리용) -->
  <event name="jdk.CPULoad">
    <setting name="enabled">true</setting>
    <setting name="period">2 s</setting>
  </event>

  <event name="jdk.GarbageCollection">
    <setting name="enabled">true</setting>
  </event>

  <event name="jdk.GCPhasePause">
    <setting name="enabled">true</setting>
    <setting name="threshold">0 ms</setting>
  </event>

  <event name="jdk.SocketRead">
    <setting name="enabled">true</setting>
    <setting name="threshold">2 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <event name="jdk.SocketWrite">
    <setting name="enabled">true</setting>
    <setting name="threshold">1 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <event name="jdk.FileRead">
    <setting name="enabled">true</setting>
    <setting name="threshold">1 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

  <event name="jdk.FileWrite">
    <setting name="enabled">true</setting>
    <setting name="threshold">1 ms</setting>
    <setting name="stackTrace">true</setting>
  </event>

</configuration>
